{% extends "layout.html" %} {% block title %}Create Mix{% endblock %} {% block
head %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/mix/create.css') }}"
/>
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/mix/_form.css') }}"
/>
{% endblock %} {% block content %}
<div class="content">
  <h2>Create Mix</h2>
  <div class="mix-card">{% include "mix/_form.html" %}</div>
</div>

<script>
  document.getElementById("mix-form").addEventListener("submit", async (e) => {
    e.preventDefault();

    const form = document.getElementById("mix-form");
    const formData = new FormData(form);

    const response = await fetch("/api/mix/create.json", {
      method: "POST",
      body: formData,
    });

    const result = await response.json();
    document.getElementById("result").innerText = JSON.stringify(
      result,
      null,
      2
    );
  });

  document.getElementById("banner").addEventListener("change", (e) => {
    const file = e.target.files[0];
    const preview = document.getElementById("banner-preview");
    const placeholder = document.getElementById("banner-placeholder");

    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        preview.src = e.target.result;
        preview.style.display = "block";
        placeholder.style.display = "none";
      };
      reader.readAsDataURL(file);
    } else {
      preview.style.display = "none";
      placeholder.style.display = "flex";
    }
  });
</script>
{% endblock %}
